<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Introduction · ZIO</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="In the functional Scala as well as in object-oriented programming the best practice is to _Program to an interface, not an implementation_. This is the most important design principle in software development and helps us to write maintainable code by:"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Introduction · ZIO"/><meta property="og:type" content="website"/><meta property="og:url" content="https://zio.dev/"/><meta property="og:description" content="In the functional Scala as well as in object-oriented programming the best practice is to _Program to an interface, not an implementation_. This is the most important design principle in software development and helps us to write maintainable code by:"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100,"cornerOffset":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/navbar_brand.png" alt="ZIO"/><h2 class="headerTitleWithLogo">ZIO</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/overview/overview_index" target="_self">Overview</a></li><li class=""><a href="/docs/datatypes/" target="_self">Data Types</a></li><li class="siteNavGroupActive siteNavItemActive"><a href="/docs/services/" target="_self">Services</a></li><li class=""><a href="/docs/usecases/usecases_index" target="_self">Use Cases</a></li><li class=""><a href="/docs/howto/" target="_self">How to</a></li><li class=""><a href="/docs/resources/" target="_self">Resources</a></li><li class=""><a href="/docs/about/about_index" target="_self">About</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Services</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Services<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/docs/services/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/services/console">Console</a></li><li class="navListItem"><a class="navItem" href="/docs/services/clock">Clock</a></li><li class="navListItem"><a class="navItem" href="/docs/services/random">Random</a></li><li class="navListItem"><a class="navItem" href="/docs/services/blocking">Blocking</a></li><li class="navListItem"><a class="navItem" href="/docs/services/system">System</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/zio/zio/edit/master/docs/services/index.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Introduction</h1></header><article><div><span><p>In the functional Scala as well as in object-oriented programming the best practice is to <em>Program to an interface, not an implementation</em>. This is the most important design principle in software development and helps us to write maintainable code by:</p>
<ul>
<li><p>Allowing the client to hold an interface as a contract and don't worry about the implementation. The interface signature determines all operations that should be done.</p></li>
<li><p>Enabling a developer to write more testable programs. When we write a test for our business logic we don't have to run and interact with real services like databases which makes our test run very slow. If our code is correct our test code should always pass, there should be no hidden variables or depend on outside sources. We can't know that the database is always running correctly. We don't want to fail our tests because of the failure of external service.</p></li>
<li><p>Providing the ability to write more modular applications. So we can plug in different implementations for different purposes without a major modification.</p></li>
</ul>
<p>It is not mandatory but ZIO encourages us to follow this principle by bundling related functionality as an interface by using module pattern.</p>
<p>Let's see how the <code>Console</code> service is defined and implemented in ZIO. To prevent naming collision with the original implementation we use the <code>Terminal</code> name to introduce the <code>Console</code> service.</p>
<ol>
<li><p>At the first step, we need to define our module <code>Terminal</code> as a type alias for <code>Has[Terminal.Service]</code>.</p></li>
<li><p>Then inside the <code>Terminal</code> companion object, we should define the service definition in a trait named <code>Service</code>. Traits are how we define services. A service could be all the stuff that is related to one concept with singular responsibility.</p></li>
<li><p>After that we need to implement our Service by creating a new Service and then lifting that entire implementation into the ZLayer data type by using the <code>succeed</code> operator.</p></li>
<li><p>Finally, to create our API more ergonomic it's better to implement accessor methods for all of our service methods.</p></li>
</ol>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">terminal</span> </span>{
  <span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">Terminal</span> </span>= <span class="hljs-type">Has</span>[<span class="hljs-type">Terminal</span>.<span class="hljs-type">Service</span>]

  <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Terminal</span> </span>{
    <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Service</span> </span>{
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">putStr</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>]

      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">putStrLn</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>]
    }

    <span class="hljs-keyword">val</span> live: <span class="hljs-type">Layer</span>[<span class="hljs-type">Nothing</span>, <span class="hljs-type">Terminal</span>] = <span class="hljs-type">ZLayer</span>.succeed {
      <span class="hljs-keyword">new</span> <span class="hljs-type">Service</span> {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">putStr</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>] =
          <span class="hljs-type">ZIO</span>.effectTotal(print(line))

        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">putStrLn</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>] =
          <span class="hljs-type">ZIO</span>.effectTotal(println(line))
      }
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">putStr</span></span>(line: =&gt; <span class="hljs-type">String</span>): <span class="hljs-type">URIO</span>[<span class="hljs-type">Terminal</span>, <span class="hljs-type">Unit</span>] =
    <span class="hljs-type">ZIO</span>.accessM(_.get.putStr(line))

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">putStrLn</span></span>(line: =&gt; <span class="hljs-type">String</span>): <span class="hljs-type">URIO</span>[<span class="hljs-type">Terminal</span>, <span class="hljs-type">Unit</span>] =
    <span class="hljs-type">ZIO</span>.accessM(_.get.putStrLn(line))
}
</code></pre>
<p>This is how the ZIO services are created. Let's use the <code>Terminal</code> service in our application:</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">TerminalExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">import</span> zio.<span class="hljs-type">RIO</span>
  <span class="hljs-keyword">import</span> terminal._
 
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> application: <span class="hljs-type">RIO</span>[<span class="hljs-type">Terminal</span>, <span class="hljs-type">Unit</span>] = putStrLn(<span class="hljs-string">"Hello, World!"</span>) 

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]) = 
    application.provideLayer(<span class="hljs-type">Terminal</span>.live).exitCode
}
</code></pre>
<p>When we write our entire <code>application</code> we don't care which implementation version of Terminal service will be injected into our <code>application</code>, later at the end of the day, it will be provided by methods like <code>provideLayer</code>.</p>
<p>ZIO already provided 5 build-in services, when we use these services we don't need to provide their corresponding environment explicitly. The <code>ZEnv</code> environment is a type alias for all of these services and will be provided by ZIO to our effects:</p>
<ul>
<li><strong><a href="/docs/services/console">Console</a></strong> — Operations for reading/writing strings from/to the standard input, output, and error console.</li>
<li><strong><a href="/docs/services/clock">Clock</a></strong> — Contains some functionality related to time and scheduling.</li>
<li><strong><a href="/docs/services/random">Random</a></strong> — Provides utilities to generate random numbers.</li>
<li><strong><a href="/docs/services/blocking">Blocking</a></strong> — Provides access to a thread pool that can be used for performing blocking operations.</li>
<li><strong><a href="/docs/services/system">System</a></strong> — Contains several useful functions related to system environments and properties.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-next button" href="/docs/services/console"><span>Console</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/navbar_brand.png" alt="ZIO"/></a><div><h5>GitHub</h5><a href="https://github.com/zio/zio"><img src="https://img.shields.io/github/stars/zio/zio?style=social" alt="github"/></a></div><div><h5>Chat with us on Discord</h5><a href="https://discord.gg/2ccFBr4"><img src="https://img.shields.io/discord/629491597070827530?logo=discord&amp;style=social" alt="discord"/></a></div><div><h5>Follow us on Twitter</h5><a href="https://twitter.com/zioscala"><img src="https://img.shields.io/twitter/follow/zioscala?label=Follow&amp;style=social" alt="twitter"/></a></div><div><h5>Additional resources</h5><a href="https://javadoc.io/doc/dev.zio/zio_2.12/">Scaladoc of zio</a></div><div><a href="https://www.netlify.com"><img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify"/></a></div></section><section class="copyright">Copyright © 2021 ZIO Maintainers</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0c94b59071da7001757d08ab43d9e033',
                indexName: 'zio',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>