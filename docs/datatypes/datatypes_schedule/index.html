<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Schedule · ZIO</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="```scala"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Schedule · ZIO"/><meta property="og:type" content="website"/><meta property="og:url" content="https://zio.dev/"/><meta property="og:description" content="```scala"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100,"cornerOffset":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/navbar_brand.png" alt="ZIO"/><h2 class="headerTitleWithLogo">ZIO</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/overview/overview_index" target="_self">Overview</a></li><li class="siteNavGroupActive"><a href="/docs/datatypes/datatypes_index" target="_self">Data Types</a></li><li class=""><a href="/docs/interop/interop_index" target="_self">Interop</a></li><li class=""><a href="/docs/usecases/usecases_index" target="_self">Use Cases</a></li><li class=""><a href="/docs/howto/howto_index" target="_self">How to</a></li><li class=""><a href="/docs/resources/resources" target="_self">Resources</a></li><li class=""><a href="/docs/ecosystem/ecosystem" target="_self">Ecosystem</a></li><li class=""><a href="/docs/about/about_index" target="_self">About</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Data Types</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Data Types</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_index">Summary</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_chunk">Chunk</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_fiber">Fiber</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_fiberref">FiberRef</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_has">Has</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_io">IO</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_managed">Managed</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_promise">Promise</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_queue">Queue</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_ref">Ref</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/datatypes/datatypes_schedule">Schedule</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_semaphore">Semaphore</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_sink">Sink</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_stream">Stream</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_tarray">TArray</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_tmap">TMap</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_tpriorityqueue">TPriorityQueue</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_tpromise">TPromise</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_tqueue">TQueue</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_treentrantlock">TReentrantLock</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_tref">TRef</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_tsemaphore">TSemaphore</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_tset">TSet</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/datatypes_zlayer">ZLayer</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Schedule</h1></header><article><div><span><pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio._
</code></pre>
<p>Schedules allow you to define and compose flexible recurrence schedules, which can be used to repeat actions, or retry actions in the event of errors. Schedules are used in the following functions:</p>
<ul>
<li><strong>Repetition</strong>
<ul>
<li><code>IO#repeat</code> — Repeats an effect until the schedule is done.</li>
<li><code>IO#repeatOrElse</code> — Repeats an effect until the schedule is done, with a fallback for errors.</li>
<li><code>IO#repeatOrElse0</code> — Repeats an effect until the schedule is done, with a more powerful fallback for errors.</li>
</ul></li>
<li><strong>Retries</strong>
<ul>
<li><code>IO#retry</code> – Retries an effect until it succeeds.</li>
<li><code>IO#retryOrElse</code> — Retries an effect until it succeeds, with a fallback for errors.</li>
<li><code>IO#retryOrElse0</code> — Retries an effect until it succeeds, with a more powerful fallback for errors.</li>
</ul></li>
</ul>
<p>Schedules define stateful, possibly effectful, recurring schedules of events, and compose in a variety of ways.</p>
<p>A <code>Schedule[R, A, B]</code> consumes input values of type <code>A</code> (errors in the case of <code>retry</code>, or values in the case of <code>repeat</code>), and based on these values and internal state, decides whether to recur or conclude. Every decision is accompanied by a (possibly zero) delay, indicating how much time before the next recurrence, and an output value of type <code>B</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="base-schedules"></a><a href="#base-schedules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Base Schedules</h2>
<p>A schedule that always recurs:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> forever = <span class="hljs-type">Schedule</span>.forever
</code></pre>
<p>A schedule that recurs 10 times:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> upTo10 = <span class="hljs-type">Schedule</span>.recurs(<span class="hljs-number">10</span>)
</code></pre>
<p>A schedule that recurs every 10 milliseconds:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> spaced = <span class="hljs-type">Schedule</span>.spaced(<span class="hljs-number">10.</span>milliseconds)
</code></pre>
<p>A schedule that recurs using exponential backoff:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> exponential = <span class="hljs-type">Schedule</span>.exponential(<span class="hljs-number">10.</span>milliseconds)
</code></pre>
<p>A schedule that recurs using fibonacci backoff:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> fibonacci = <span class="hljs-type">Schedule</span>.fibonacci(<span class="hljs-number">10.</span>milliseconds)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="schedule-combinators"></a><a href="#schedule-combinators" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Schedule Combinators</h2>
<p>Applying random jitter to a schedule:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> jitteredExp = <span class="hljs-type">Schedule</span>.exponential(<span class="hljs-number">10.</span>milliseconds).jittered
</code></pre>
<p>Modifies the delay of a schedule:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> boosted = <span class="hljs-type">Schedule</span>.spaced(<span class="hljs-number">1.</span>second).delayed(_ =&gt; <span class="hljs-number">100.</span>milliseconds)
</code></pre>
<p>Combines two schedules sequentially, by following the first policy until it ends, and then following the second policy:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> sequential = <span class="hljs-type">Schedule</span>.recurs(<span class="hljs-number">10</span>) andThen <span class="hljs-type">Schedule</span>.spaced(<span class="hljs-number">1.</span>second)
</code></pre>
<p>Combines two schedules through intersection, by recurring only if both schedules want to recur, using the maximum of the two delays between recurrences:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> expUpTo10 = <span class="hljs-type">Schedule</span>.exponential(<span class="hljs-number">1.</span>second) &amp;&amp; <span class="hljs-type">Schedule</span>.recurs(<span class="hljs-number">10</span>)
</code></pre>
<p>Combines two schedules through union, by recurring if either schedule wants to
recur, using the minimum of the two delays between recurrences:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> expCapped = <span class="hljs-type">Schedule</span>.exponential(<span class="hljs-number">100.</span>milliseconds) || <span class="hljs-type">Schedule</span>.spaced(<span class="hljs-number">1.</span>second)
</code></pre>
<p>Stops retrying after a specified amount of time has elapsed:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> expMaxElapsed = (<span class="hljs-type">Schedule</span>.exponential(<span class="hljs-number">10.</span>milliseconds) &gt;&gt;&gt; <span class="hljs-type">Schedule</span>.elapsed).whileOutput(_ &lt; <span class="hljs-number">30.</span>seconds)
</code></pre>
<p>Retry only when a specific exception occurs:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> scala.concurrent.<span class="hljs-type">TimeoutException</span>

<span class="hljs-keyword">val</span> whileTimeout = <span class="hljs-type">Schedule</span>.exponential(<span class="hljs-number">10.</span>milliseconds) &amp;&amp; <span class="hljs-type">Schedule</span>.recurWhile[<span class="hljs-type">Throwable</span>] {
  <span class="hljs-keyword">case</span> _: <span class="hljs-type">TimeoutException</span> =&gt; <span class="hljs-literal">true</span>
  <span class="hljs-keyword">case</span> _ =&gt; <span class="hljs-literal">false</span>
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/datatypes/datatypes_ref"><span class="arrow-prev">← </span><span>Ref</span></a><a class="docs-next button" href="/docs/datatypes/datatypes_semaphore"><span>Semaphore</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#base-schedules">Base Schedules</a></li><li><a href="#schedule-combinators">Schedule Combinators</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/navbar_brand.png" alt="ZIO"/></a><div><h5>GitHub</h5><a href="https://github.com/zio/zio"><img src="https://img.shields.io/github/stars/zio/zio?style=social" alt="github"/></a></div><div><h5>Chat with us on Discord</h5><a href="https://discord.gg/2ccFBr4"><img src="https://img.shields.io/discord/629491597070827530?logo=discord&amp;style=social" alt="discord"/></a></div><div><h5>Follow us on Twitter</h5><a href="https://twitter.com/zioscala"><img src="https://img.shields.io/twitter/follow/zioscala?label=Follow&amp;style=social" alt="twitter"/></a></div><div><h5>Additional resources</h5><a href="https://javadoc.io/doc/dev.zio/zio_2.12/">Scaladoc of zio</a></div><div><a href="https://www.netlify.com"><img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify"/></a></div></section><section class="copyright">Copyright © 2021 ZIO Maintainers</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0c94b59071da7001757d08ab43d9e033',
                indexName: 'zio',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>